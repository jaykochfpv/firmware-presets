#$ TITLE: Cinelog20 (AUW 200-249g)
#$ FIRMWARE_VERSION: 4.4
#$ CATEGORY: TUNE
#$ STATUS: OFFICIAL
#$ KEYWORDS: CineLog20, Cinelog, Geprc
#$ AUTHOR: InformatikLK13 der Anna-Seghers-Schule

#$ PARSER: MARKED

#$ DESCRIPTION: We are students from the "Anna-Seghers-Schule" in Berlin, we wanted to make a present for the Geprc Cinelog20 and enhance the perfomance of it.
#$ DESCRIPTION:
#$ DESCRIPTION: Preset for this quadcopter:
#$ DESCRIPTION: -----------
#$ DESCRIPTION: <img src="https://www.skyraccoon.com/assets/images/airicons/master/legacy/GEP-RC_CineLog20_cinelog20.png" width="350px"/>
#$ DESCRIPTION:
#$ DESCRIPTION: Description:
#$ DESCRIPTION: -----------
#$ DESCRIPTION: Enhanced tune for Cinelog20 quad with DJI Air Unit O3, approximate weight 200 to 249 grams.  This tune is good for 4S 660-750mah batteries. The base preset assume you have your ESC set to 24K PWM.  If you have it on 48K+ ESC PWM, click that optSion above. If you would like to use with RPM filtering or Dynamic Idle, click the options above. If you don't know what these features mean, click the links below for videos on each topic.
#$ DESCRIPTION:
#$ DESCRIPTION: <img src="https://www.kingquad.shop/cdn/shop/collections/45d8d601525524fbc80164d21403a0ed_600x600_crop_center.png?v=1637613618" width="200px" height="100px" style="margin-left: auto; margin-right: auto; display: block;"/>
#$ DESCRIPTION:
#$ DESCRIPTION: Information:
#$ DESCRIPTION: -----------
#$ DESCRIPTION: - [What is ESC PWM Frequency? Credits to UAVTech](https://youtu.be/v3806Incpvo)
#$ DESCRIPTION: - [More Whoop Battery @ 48k PWM! Credits to UAVTech](https://youtu.be/iyQoOrXuldc)
#$ DESCRIPTION:
#$ DESCRIPTION:   (Recommendation: 24k | make sure to adjust in ESC settings)
#$ DESCRIPTION:
#$ DESCRIPTION:
#$ DESCRIPTION: - [What is the RPM Filter? Credits to UAVTech](https://youtu.be/ve_TNB0D87U)
#$ DESCRIPTION: - [RPM vs. Dynamic Notch ONLY Credits to UAVTech](https://youtu.be/ve_TNB0D87U)
#$ DESCRIPTION:
#$ DESCRIPTION:
#$ DESCRIPTION: - [What is Dynamic Idle? Credits to UAVTech](https://youtu.be/2Mr-AP7K8YE)
#$ DESCRIPTION:
#$ WARNING: **DO NOT** select the RPM Filter option unless your ESCs support DSHOT and Bi-Directional Communication.  If you are unsure, HIT CANCEL and de-select that option, OTHERWISE it can spin up motors even before you arm your quad!!! Be really careful here.
#$ DISCUSSION: https://github.com/betaflight/firmware-presets/pull/352
#$ INCLUDE: presets/4.4/tune/defaults.txt
#$ INCLUDE: presets/4.3/filters/defaults.txt

# -- PID Settings --
profile 0

# profile 0
set profile_name = CL20-PIDs
set dterm_lpf1_dyn_min_hz = 63
set dterm_lpf1_dyn_max_hz = 127
set dterm_lpf1_dyn_expo = 5
set dterm_lpf1_type = PT1
set dterm_lpf1_static_hz = 63
set dterm_lpf2_type = PT1
set dterm_lpf2_static_hz = 127
set dterm_notch_hz = 0
set dterm_notch_cutoff = 0
set vbat_sag_compensation = 100
set pid_at_min_throttle = ON
set anti_gravity_mode = SMOOTH
set anti_gravity_threshold = 250
set anti_gravity_gain = 3500
set acc_limit_yaw = 0
set acc_limit = 0
set crash_dthreshold = 50
set crash_gthreshold = 400
set crash_setpoint_threshold = 350
set crash_time = 500
set crash_delay = 0
set crash_recovery_angle = 10
set crash_recovery_rate = 100
set crash_limit_yaw = 200
set crash_recovery = OFF
set iterm_rotation = OFF
set iterm_relax = RP
set iterm_relax_type = SETPOINT
set iterm_relax_cutoff = 15
set iterm_windup = 85
set iterm_limit = 400
set pidsum_limit = 500
set pidsum_limit_yaw = 400
set yaw_lowpass_hz = 100
set throttle_boost = 5
set throttle_boost_cutoff = 15
set acro_trainer_angle_limit = 20
set acro_trainer_lookahead_ms = 50
set acro_trainer_debug_axis = ROLL
set acro_trainer_gain = 75
set p_pitch = 73
set i_pitch = 111
set d_pitch = 55
set f_pitch = 154
set p_roll = 70
set i_roll = 106
set d_roll = 56
set f_roll = 148
set p_yaw = 70
set i_yaw = 106
set d_yaw = 0
set f_yaw = 148
set angle_level_strength = 50
set horizon_level_strength = 50
set horizon_transition = 75
set level_limit = 55
set horizon_tilt_effect = 75
set horizon_tilt_expert_mode = OFF
set abs_control_gain = 0
set abs_control_limit = 90
set abs_control_error_limit = 20
set abs_control_cutoff = 11
set use_integrated_yaw = OFF
set integrated_yaw_relax = 200
set d_min_roll = 54
set d_min_pitch = 55
set d_min_yaw = 0
set d_max_gain = 37
set d_max_advance = 20
set motor_output_limit = 100
set auto_profile_cell_count = 0
set launch_control_mode = NORMAL
set launch_trigger_allow_reset = ON
set launch_trigger_throttle_percent = 20
set launch_angle_limit = 0
set launch_control_gain = 40
set thrust_linear = 0
set transient_throttle_limit = 0
set feedforward_transition = 0
set feedforward_averaging = OFF
set feedforward_smooth_factor = 60
set feedforward_jitter_factor = 12
set feedforward_boost = 15
set feedforward_max_rate_limit = 90
set dyn_idle_min_rpm = 30
set dyn_idle_p_gain = 50
set dyn_idle_i_gain = 50
set dyn_idle_d_gain = 50
set dyn_idle_max_increase = 150
set level_race_mode = OFF
set simplified_pids_mode = OFF
set simplified_master_multiplier = 100
set simplified_i_gain = 100
set simplified_d_gain = 100
set simplified_pi_gain = 100
set simplified_dmax_gain = 100
set simplified_feedforward_gain = 100
set simplified_pitch_d_gain = 100
set simplified_pitch_pi_gain = 100
set simplified_dterm_filter = ON
set simplified_dterm_filter_multiplier = 85

rateprofile 0

# rateprofile 0
set rateprofile_name = CL20-Rates
set thr_mid = 50
set thr_expo = 0
set rates_type = ACTUAL
set quickrates_rc_expo = OFF
set roll_rc_rate = 7
set pitch_rc_rate = 7
set yaw_rc_rate = 7
set roll_expo = 0
set pitch_expo = 0
set yaw_expo = 0
set roll_srate = 67
set pitch_srate = 67
set yaw_srate = 67
set tpa_rate = 40
set tpa_breakpoint = 1800
set tpa_mode = D
set throttle_limit_type = OFF
set throttle_limit_percent = 100
set roll_rate_limit = 1998
set pitch_rate_limit = 1998
set yaw_rate_limit = 1998
set roll_level_expo = 0
set pitch_level_expo = 0

/* #$ OPTION_GROUP BEGIN: Choose ONE Filter option (+ RPM filter if desired)
    #$ OPTION BEGIN (UNCHECKED): Original Geprc
    	# -- ADDER: For HIGH gyro vibration builds --
    	set simplified_gyro_filter = ON
    	set simplified_gyro_filter_multiplier = 30
    	set simplified_dterm_filter = ON
    	set simplified_dterm_filter_multiplier = 100
    	set dyn_notch_count = 4
    	set dyn_notch_min_hz = 80
    	set dyn_notch_max_hz = 750
    	set yaw_lowpass_hz = 90
    #$ OPTION END

    #$ OPTION BEGIN (CHECKED): Self Build - exact Parts 
    	# -- ADDER: For Medium gyro vibration builds --
    	set simplified_gyro_filter = ON
    	set simplified_gyro_filter_multiplier = 60
    	set simplified_dterm_filter = ON
    	set simplified_dterm_filter_multiplier = 100
    	set dyn_notch_count = 3
    	set dyn_notch_min_hz = 100
    	set dyn_notch_max_hz = 750
    	set yaw_lowpass_hz = 125
    #$ OPTION END

    #$ OPTION BEGIN (UNCHECKED): HIGH Build Quality
    	# -- ADDER: For low gyro vibration builds --
    	# set simplified_gyro_filter = ON
    	# set simplified_gyro_filter_multiplier = 100
    	# set simplified_dterm_filter = ON
    	# set simplified_dterm_filter_multiplier = 120
    	# set dyn_notch_count = 2
    	# set dyn_notch_min_hz = 125
    	# set dyn_notch_max_hz = 750
    	# set yaw_lowpass_hz = 0
    #$ OPTION END

    #$ OPTION BEGIN (UNCHECKED): ... + enable RPM filter (if supported)
    	# -- ADDER: Enabled RPM filtering --
    	set motor_pwm_protocol = DSHOT600
    	set dshot_bidir = ON
    	set motor_poles = 12
    	set rpm_filter_harmonics = 2
    	set dyn_notch_count = 2
    #$ OPTION END
#$ OPTION_GROUP END

#$ OPTION_GROUP BEGIN: ESC PWM Options ...
    #$ OPTION BEGIN (CHECKED): 16 & 24k ESC PWM Settings
    	# -- ADDER: For 16 & 24k ESC PWM Settings --
    	set thrust_linear = 0
    #$ OPTION END

    #$ OPTION BEGIN (UNCHECKED): 48k ESC PWM Settings
    	# -- ADDER: For 48k ESC PWM Settings --
    	set thrust_linear = 20
    #$ OPTION END

    #$ OPTION BEGIN (UNCHECKED): 96k+ ESC PWM Settings
    	# -- ADDER: For 96k ESC PWM Settings --
    	set thrust_linear = 40
    #$ OPTION END
#$ OPTION_GROUP END

#$ OPTION_GROUP BEGIN: Prop Wash Performance Booster ...
    #$ OPTION BEGIN (UNCHECKED): Dynamic Idle
    	# -- ADDER: Enabling Dynamic Idle --
    	set dyn_idle_min_rpm = 35
    #$ OPTION END
#$ OPTION_GROUP END
*/ 

batch end


